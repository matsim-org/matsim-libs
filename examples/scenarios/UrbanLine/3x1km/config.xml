<?xml version="1.0" ?>
<!DOCTYPE config SYSTEM "http://www.matsim.org/files/dtd/config_v2.dtd">
<config>

	<module name="global">
		<param name="randomSeed" value="4711" />
		<param name="coordinateSystem" value="EPSG:6677" />
		<param name="numberOfThreads" value="34" />
	</module>

	<module name="network">
		<param name="inputNetworkFile" value="network_pt.xml" />
	</module>

	<module name="plans">
		<param name="inputPlansFile" value="plans.xml" />
	</module>

	<module name="controler">
		<param name="outputDirectory" value="./output" />
		<param name="overwriteFiles" value="deleteDirectoryIfExists" />
		<param name="firstIteration" value="0" />
		<param name="lastIteration" value="25" />
		<param name="eventsFileFormat" value="xml" />
		<param name="mobsim" value="qsim" />
	</module>

	<module name="qsim">
		<!-- "start/endTime" of MobSim (00:00:00 == take earliest activity time/ run as long as active vehicles exist) -->
		<param name="startTime" value="00:00:00" />
		<param name="endTime" value="30:00:00" />

		<param name = "snapshotperiod"	value = "00:00:00"/> <!-- 00:00:00 means NO snapshot writing -->
	</module>

	<module name="planCalcScore">
		<param name="learningRate" value="1.0" />
		<param name="BrainExpBeta" value="2.0" />

		<param name="lateArrival" value="-18" />
		<param name="earlyDeparture" value="-0" />
		<param name="performing" value="+6" />
		<param name="waiting" value="-0" />

		<!-- MODE PARAMETERS -->
		<!-- asc_rail_w   -841.1623 -->
		<!-- asc_rail_b   -5428.7875 -->
		<!-- asc_rail_c   -7073.6735 -->
		<!-- asc_walk     0.0000000 -->
		<!-- asc_bike     -1834.7472 -->
		<!-- asc_car      -1835.4811 -->
		<!-- b_tt_w       -7381.3200 -->
		<!-- b_tt_b       -6084.3600 -->
		<!-- b_tt_c       -6063.1200 -->
		<!-- b_tt_r       -377.6400 -->
		<!-- b_rail_co    -1.1405 -->
		<!-- b_car_co     -3.1216 -->

		<!-- ALTERNATE MODE PARAMETERS -->
		<!-- asc_walk       0.0000000 -->
		<!-- asc_bike       -1472.1026 -->
		<!-- asc_car        -1945.6262 -->
		<!-- asc_pass1      -3860.9948 -->
		<!-- asc_pass2      -3270.1045 -->
		<!-- asc_rail_w     -703.1476 -->
		<!-- asc_rail_b     -5420.1822 -->
		<!-- asc_rail_c     -8622.1797 -->
		<!-- asc_rail_p1    -7542.6445 -->
		<!-- asc_rail_p2    -6973.4619 -->
		<!-- b_tt_w         -7475.3759 -->
		<!-- b_tt_b         -5823.9003 -->
		<!-- b_tt_c         -5662.9789 -->
		<!-- b_tt_p1        -6188.2158 -->
		<!-- b_tt_p2        -7067.8152 -->
		<!-- b_tt_r         -47.7792 -->
		<!-- b_co           -1310.8 -->
		<!-- pt cost         20 Y/km -->
		<!-- drt cost        40 Y/km -->
		<!-- car cost        10 Y/km -->


		<parameterset type="modeParams">
			<param name="mode" value="car"/>
			<param name="constant" value="-1.8" />
			<param name="marginalUtilityOfTraveling_util_hr" value="-5.7" />
			<param name="monetaryDistanceRate" value="-0.01" />
		</parameterset>
		<parameterset type="modeParams">
			<param name="mode" value="drt"/>
			<param name="constant" value="-3.3" />
			<param name="marginalUtilityOfTraveling_util_hr" value="-6.2" />
			<param name="monetaryDistanceRate" value="-0.05" />
			<!-- [utils] daily utility constant. default=0 to be backwards compatible -->
			<param name="dailyUtilityConstant" value="-0.0" />
		</parameterset>
		<parameterset type="modeParams">
			<param name="mode" value="pt"/>
			<param name="constant" value="-0.7" />
			<param name="marginalUtilityOfTraveling_util_hr" value="-0.0" />
			<param name="monetaryDistanceRate" value="-0.03" />
			<!-- [utils] daily utility constant. default=0 to be backwards compatible -->
			<param name="dailyUtilityConstant" value="0.0" />
		</parameterset>
		<parameterset type="modeParams">
			<param name="constant" value="0.0" />
			<param name="marginalUtilityOfTraveling_util_hr" value="-7.5" />
			<param name="mode" value="walk" />
			<param name="monetaryDistanceRate" value="0.0" />
		</parameterset>
		<parameterset type="modeParams">
			<param name="constant" value="-1.5" />
			<param name="marginalUtilityOfTraveling_util_hr" value="-5.8" />
			<param name="mode" value="bike" />
			<param name="monetaryDistanceRate" value="0.0" />
		</parameterset>


		<parameterset type="activityParams">
			<param name="activityType"    value="h" /> <!-- home -->
			<param name="priority"        value="1" />
			<param name="typicalDuration" value="12:00:00" />
			<param name="minimalDuration" value="08:00:00" />
		</parameterset>

		<parameterset type="activityParams">
			<param name="activityType"            value="w" /> <!-- work -->
			<param name="priority"        value="1" />
			<param name="typicalDuration" value="08:00:00" />
			<param name="minimalDuration" value="06:00:00" />
			<param name="openingTime"     value="07:00:00" />
			<param name="latestStartTime" value="09:00:00" />
			<param name="earliestEndTime" value="" />
			<param name="closingTime"     value="18:00:00" />
		</parameterset>

		<parameterset type="activityParams">
			<param name="activityType"            value="s" /> <!-- shop -->
			<param name="priority"        value="1" />
			<param name="typicalDuration" value="00:40:00" />
			<param name="minimalDuration" value="00:10:00" />
			<param name="openingTime"     value="08:00:00" />
			<param name="latestStartTime" value="" />
			<param name="earliestEndTime" value="" />
			<param name="closingTime"     value="20:00:00" />
		</parameterset>
	</module>

	<module name="strategy">
		<param name="maxAgentPlanMemorySize" value="5" /> <!-- 0 means unlimited -->

		<parameterset type="strategysettings">
			<param name="strategyName" value="BestScore"/>
			<param name="weight" value="0.7"/>
		</parameterset>

		<parameterset type="strategysettings">
			<param name="strategyName" value="ReRoute"/>
			<param name="weight" value="0.1"/>
		</parameterset>

		<parameterset type="strategysettings">
			<param name="strategyName" value="TimeAllocationMutator"/>
			<param name="weight" value="0.1"/>
		</parameterset>
		<parameterset type="strategysettings">
			<param name="strategyName" value="ChangeTripMode"/>
			<param name="weight" value="0.1"/>
		</parameterset>

	</module>

	<module name="transit">
		<param name="useTransit" value="true" />
		<param name="transitScheduleFile" value="transitschedule.xml" />
		<param name="vehiclesFile" value="transitVehicles.xml" />
		<param name="transitModes" value="pt" />
	</module>


	<module name="changeMode">
		<!-- provide a comma-separated list of leg modes -->
		<param name="modes" value="car,bike,walk,pt,drt" />
	</module>

	<module name="subtourModeChoice" >
		<!-- Only for backwards compatibility.  Defines if only trips from modes list should change mode, or all trips.  Options: fromAllModesToSpecifiedModes fromSpecifiedModesToSpecifiedModes  -->
		<param name="behavior" value="fromSpecifiedModesToSpecifiedModes" />
		<!-- Defines the chain-based modes, seperated by commas -->
		<param name="chainBasedModes" value="car,bike" />
		<!-- Defines whether car availability must be considered or not. A agent has no car only if it has no license, or never access to a car -->
		<param name="considerCarAvailability" value="true" />
		<!-- Defines all the modes available, including chain-based modes, seperated by commas -->
		<param name="modes" value="walk,bike,car,pt,drt" />
	</module>


	<!-- This module is dedicated to configuring the multi-modal DRT (Demand Responsive Transport). -->
	<module name="multiModeDrt">
		<parameterset type="drt">
			<!-- The search strategy for finding a vehicle for a DRT request. -->
			<parameterset type="ExtensiveInsertionSearch"/>
			<!-- The duration of a stop in seconds. This is the time a vehicle waits at a stop. -->
			<param name="stopDuration" value="60"/>
			<!-- Operational Scheme, either of door2door, stopbased or serviceAreaBased. door2door by default -->
			<param name="operationalScheme" value="door2door"/>
			<!-- Maximum wait time in seconds before being picked up by a DRT vehicle. -->
			<param name="maxWaitTime" value="3600"/>
			<!-- Alpha parameter for max travel time estimation. Used to increase the travel time estimation based on direct travel time. -->
			<param name="maxTravelTimeAlpha" value="3.0"/>
			<!-- Beta parameter for max travel time estimation. This value in seconds will be added to the estimated travel time. -->
			<param name="maxTravelTimeBeta" value="1200"/>

			<param name="vehiclesFile" value="outputdrts0S4.xml"/>

<!--			<parameterset type="zonalSystem">-->
<!--				&lt;!&ndash; Specifies how the zones are generated. Here, it's based on a grid derived from the network. &ndash;&gt;-->
<!--				<param name="zonesGeneration" value="GridFromNetwork"/>-->
<!--				&lt;!&ndash; The cell size of the grid in meters. This defines the size of each zone in the zonal system. &ndash;&gt;-->
<!--				<param name="cellSize" value="10"/>-->
<!--			</parameterset>-->

<!--			<parameterset type="rebalancing">-->
<!--				&lt;!&ndash; Uses the min-cost flow rebalancing strategy. &ndash;&gt;-->
<!--				<parameterset type="minCostFlowRebalancingStrategy">-->
<!--					&lt;!&ndash; Target alpha value for the rebalancing strategy. &ndash;&gt;-->
<!--					<param name="targetAlpha" value="0.5"/>-->
<!--					&lt;!&ndash; Target beta value for the rebalancing strategy. &ndash;&gt;-->
<!--					<param name="targetBeta" value="0.5"/>-->
<!--				</parameterset>-->
<!--			</parameterset>-->

			<parameterset type="drtfare">
				<!-- Base fare for a DRT trip. -->
				<param name="basefare" value="100.0"/>
				<!-- Daily subscription fee for using the DRT service. -->
				<param name="dailySubscriptionFee" value="0.0"/>
				<!-- Fare per meter of travel. -->
				<param name="distanceFare_m" value="0.04"/>
				<!-- Fare per hour of travel. -->
				<param name="timeFare_h" value="0"/>
				<!-- Minimum fare charged per DRT trip. -->
				<param name="minFarePerTrip" value="100"/>
			</parameterset>
		</parameterset>
	</module>


	<module name="swissRailRaptor" >
		<!-- Sets whether intermodal access and egress modes are selected by least cost (default) or randomly chosen out of the available access / egress modes. -->
		<param name="intermodalAccessEgressModeSelection" value="RandomSelectOneModePerRoutingRequestAndDirection" />
		<param name="useIntermodalAccessEgress" value="true" />
		<param name="useRangeQuery" value="true" />
		<param name="scoringParameters" value="Individual" />
		<param name="transferPenaltyBaseCost" value="100" />
		<param name="transferPenaltyCostPerTravelTimeHour" value="200" />
		<param name="transferPenaltyMaxCost" value="300" />
		<param name="transferPenaltyMinCost" value="130" />

		<!-- The configuration for walking as access/egress mode. -->
		<parameterset type="intermodalAccessEgress" >
			<!-- Initial distance around a person's origin or destination within which transit stops are looked for. -->
			<param name="initialSearchRadius" value="1500.0" />
			<!-- Maximum distance a person is willing to walk to/from a transit stop. -->
			<param name="maxRadius" value="2500.0" />
			<!-- If less than 2 transit stops are found within the initial search radius,
                 this value is added to the initial radius iteratively until transit stops are found or maxRadius is reached. -->
			<param name="searchExtensionRadius" value="500.0" />
			<!-- mode of transport for this parameterset is walking. -->
			<param name="mode" value="walk" />
		</parameterset>

		<!-- The configuration for DRT as access/egress mode. -->
		<parameterset type="intermodalAccessEgress" >
			<!-- Initial distance around a person's origin or destination within which transit stops are looked for when using DRT. -->
			<param name="initialSearchRadius" value="3000.0" />
			<!-- If specific link IDs are to be used for DRT, they would be specified by an attribute.
                 In this case, no such attribute is set (null). -->
			<param name="linkIdAttribute" value="null" />
			<!-- Maximum distance a person is willing to travel using DRT to/from a transit stop. -->
			<param name="maxRadius" value="4000.0" />
			<param name="mode" value="drt" />
			<!-- Specific agent attributes  considered for DRT access/egress. -->
			<param name="personFilterAttribute" value="null" />
			<param name="personFilterValue" value="null" />
			<!-- Similar to walking, if fewer transit stops are found,
                 this value is added to the initial radius until stops are found or maxRadius is reached. -->
			<param name="searchExtensionRadius" value="1000.0" />
			<!-- If sharing of DRT vehicles is considered, this defines the maximum search radius for potential ride-sharing opportunities.
                 Here, it's set to infinity, meaning there's no limit. -->
			<param name="shareTripSearchRadius" value="Infinity" />
			<!-- If transit stops are filtered based on specific attributes, those would be defined here.
                 In this case, no such attributes are set. -->
			<param name="stopFilterAttribute" value="null" />
			<param name="stopFilterValue" value="null" />
		</parameterset>

		<parameterset type="rangeQuerySettings" >
			<param name="maxEarlierDeparture_sec" value="900" />
			<param name="maxLaterDeparture_sec" value="900" />
		</parameterset>
		<parameterset type="routeSelector" >
			<param name="betaDepartureTime" value="0.0" />
			<param name="betaTransferCount" value="300.0" />
			<param name="betaTravelTime" value="1" />
			<param name="subpopulations" value="" />
		</parameterset>
	</module>

</config>
